**Группа:** 6303-010302D  
**Авторы:** Атауллов Раис и Гильмутдинов Эдуард  

## Приложение: веб-сервис для покупки билетов на футбольные матчи

### Функционал
Фулстек-приложение с возможностью:
- Регистрации и авторизации пользователей.
- Просмотра расписания матчей и доступных билетов.
- Покупки билетов (с выбором матча и места).
- Управления покупками (просмотр, удаление заказов).
- Администрирования (добавление и удаление матчей).

### Концепция веб-приложения

#### Для пользователя:
- **Главная страница:** Список актуальных матчей, поиск по дате и команде.
- **Страница матча:** Информация о матче, выбор билетов (ряд, место).
- **Корзина:** Информация о выбранных для заказа билетов, удаление билетов из корзины.
- **История заказов:** Информация о заказах.

#### Для администратора:
- **Главная страница:** Список актуальных матчей, поиск по дате и команде.
- **Страница матча:** Информация о матче, выбор билетов (ряд, место).
- **Админ-панель:** Управление матчами.

### Пример сценария использования

#### 1. Покупка билетов пользователем
1. Авторизация/вход в систему пользователя.
2. Выбрать нужную дату/команду.
3. Выбрать матч.
4. Выбрать ряд и место.
5. Добавить билет в корзину.
6. В корзине совершить покупку.

#### 2. Добавление матча администратором
1. Вход в систему администратора.
2. Ввести данные о матче: команды, стадион, дата.
3. Сохранить изменения.

### Описание архитектуры

1. **Клиентский интерфейс (Frontend):**  
   Этот компонент будет реализован с использованием React и TypeScript. Он будет отвечать за представление данных пользователю и взаимодействие с пользователем.

2. **Серверное приложение (Backend):**  
   Этот компонент будет реализован на языке Python. Он будет отвечать за обработку запросов от клиентского интерфейса, взаимодействие с базой данных и выполнение бизнес-логики приложения.

3. **База данных:**  
   База данных будет реализована с использованием СУБД PostgreSQL. Она будет хранить все данные о пользователях, билетах и матчах.

4. **Сервер:**  
   Сервер будет работать на дистрибутиве Linux. Он будет отвечать за размещение и работу серверного приложения и базы данных.

Клиентский интерфейс будет взаимодействовать с серверным приложением посредством HTTP-запросов. Серверное приложение будет взаимодействовать с базой данных для получения и сохранения данных. Все компоненты будут размещены на одном сервере.

### Схема взаимодействия компонентов
![Схема взаимодействия]([media/image1.png](https://github.com/Rais-Ataullov/NetProgTechnologies/blob/main/lab0/img1.png))

### Схема базы данных
![Схема базы данных]([media/image2.png](https://github.com/Rais-Ataullov/NetProgTechnologies/blob/main/lab0/img2.png))

### Сущности

- **Пользователь:** Хранит информацию о пользователях для входа в систему и о уровнях доступа.
- **Заказ:** Хранит информацию о заказах, дате их совершения и стоимости.  
  **Связь:** У пользователя в системе может быть сколько угодно заказов, каждый заказ имеет своего пользователя.
- **Билет:** Хранит информацию о билетах, также указывается статус билета (куплен/не куплен).  
  **Связь:** В заказе может быть несколько билетов, билет может быть и не куплен (не быть ни в одном заказе).
- **Матч:** Хранит информацию о матче (команды-участники матча, дата проведения матча, место проведения матча).  
  **Связь:** Билет связан с определенным матчем, на матч продается несколько билетов. Пользователь и матч связаны отношением «many-to-many» через промежуточные таблицы билетов и заказов.
- **Команда:** Хранит информацию о футбольной команде, включая изображение эмблемы для GUI, которые будут храниться в отдельном облаке Yandex Cloud.  
  **Связь:** Команда может и не участвовать в матчах (были исключены из турнира), в матче должны участвовать две команды.
- **Стадион:** Хранит информацию о стадионах.  
  **Связь:** У каждой команды есть стадион, у каждого стадиона есть команда.
- **История покупок:** Хранит информацию о сделанных заказах.
- **Корзина:** Хранит информацию о выбранных билетах.

### Структура REST API

| Метод              | URL                     | Действие               | Параметры            | Формат ответа         |
|---------------------|-------------------------|------------------------|----------------------|-----------------------|
| **Пользовательские действия** | | | | |
| POST                | /api/auth/register      | Регистрация            | login, password, email | JSON (user_id)        |
| POST                | /api/auth/login         | Авторизация            | login, password      | JSON (token)          |
| POST                | /api/auth/logout        | Выход из системы       | ---                  | JSON (message)        |
| GET                 | /api/matches            | Список матчей          | date, team           | JSON (массив матчей)  |
| POST                | /api/cart               | Добавление билета в корзину | match_id, seat_num, row | JSON (ticket_id)      |
| GET                 | /api/cart               | Просмотр корзины       | ---                  | JSON (массив билетов) |
| DELETE              | /api/cart/{id}          | Удаление билета из корзины | ---                  | JSON (message)        |
| GET                 | /api/purchases          | История покупок        | ---                  | JSON (массив заказов) |
| POST                | /api/purchases/checkout | Покупка билета         | ---                  | JSON (message, purchases) |
| **Администраторские действия** | | | | |
| POST                | /api/admin/matches      | Добавление матча       | Team1, team2, date   | JSON (match_id)       |
| DELETE              | /api/admin/matches/{id} | Удаление матча         | ---                  | JSON (message)        |
